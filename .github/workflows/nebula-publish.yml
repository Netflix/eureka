name: Publish Release

on:
  push:
    branches:
      - master  # Ensure this is the branch you want to trigger the action from

jobs:
  publish:
    runs-on: ubuntu-latest  # Ensure the correct environment is used

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up JDK 11
      uses: actions/setup-java@v1
      with:
        java-version: '11'  # Make sure JDK 11 is required for your build

    - name: Build with Gradle
      run: ./gradlew build # Make sure this command is correct for your project

    - name: Publish release
      uses: nebula-plugins/gradle-release-action@v1
      with:
        gradle-version: 7.0  # Ensure this version is correct for your project
        release-name: 'release-${{ github.sha }}'  # Ensure this format is what you need
        # Add any additional necessary parameters, like authentication tokens or repository info
